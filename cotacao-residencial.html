<!DOCTYPE html>
<html>

<head>
    <title>Formulário de três etapas</title>

    <!--CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/src/css/custom.css" />

    <!--Javascript-->
</head>

<body>
    <!-- Container Formulário-->
    <div class="container col-md-8 mx-auto">
        <form action="#" id="form" method="POST">
            <div>
                <!-- Inicio da Etapa 1 -->
                <div id="step-1" class="form-step">
                    <h2 class="text-center mt-8">Para Iniciar Preencha Seus Dados:</h2>

                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="cpf">CPF: </label>
                                <input type="text" class="form-control col" id="cpf" name="cpf" required minlength="11"
                                    maxlength="14" />
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="nome">Nome:</label>
                                <input type="text" class="form-control col nome" id="nome" name="nome" minlength="1"
                                    maxlength="160" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="numerotelefone">Celular ou Telefone:</label>
                                <input type="text" class="form-control col numerotelefone" id="numerotelefone"
                                    name="numerotelefone" minlength="10" maxlength="11" placeholder="(DDD) 00000-0000"
                                    required />
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="tipotelefone">Tipo de Telefone</label>
                                <select class="form-control" id="tipotelefone">
                                    <option value="0">Telefone Celular</option>
                                    <option value="1">Telefone Fixo</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="datanascimento">Data de Nascimento</label>
                                <input type="text" class="form-control col datanascimento" id="datanascimento"
                                    name="datanascimento" minlength="10" maxlength="10" placeholder="Ano/Mês/Dia"
                                    required />
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn btn-primary next-step" id="next-step" style="width: 100%">
                        Iniciar Cotação
                    </button>
                </div>
                <!-- Fim da Etapa 1-->

                <!-- Etapa 2 -->
                <div id="step-2" style="display: none" class="form-step">
                    <h2 class="text-center">Dados de Endereço do Imóvel</h2>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="cep">Cep:</label>
                                <input type="text" class="form-control col cep" id="cep" name="cep" minlength="8"
                                    maxlength="8" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="logradouro">Endereço:</label>
                                <input type="text" class="form-control col logradouro" id="logradouro" name="logradouro"
                                    minlength="1" maxlength="200" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="tipo">Tipo de Residência</label>
                                <select class="form-control tipo" id="tipo">
                                    <option value="rua">Rua</option>
                                    <option value="avenida">Avenida</option>
                                    <option value="praca">Praça</option>
                                </select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="numero">Nº do Imóvel</label>
                                <input type="number" class="form-control col numero" id="numero" name="numero"
                                    minlength="1" maxlength="9999" pattern="^[0-9]{1,4}$" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="bairro">Bairro:</label>
                                <input type="text" class="form-control col bairro" id="bairro" name="bairro"
                                    minlength="1" maxlength="40" required />
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="cidade">Cidade:</label>
                                <input type="text" class="form-control col cidade" id="cidade" name="cidade"
                                    minlength="1" maxlength="40" required />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="uf">Estado (UF):</label>
                            <input type="text" class="form-control col uf" id="uf" name="uf" required />
                        </div>
                    </div>

                    <button type="button" class="btn btn-secondary prev-step">
                        Etapa anterior
                    </button>
                    <button type="button" class="btn btn-primary next-step">
                        Avançar
                    </button>
                </div>
                <!-- Fim da Etapa 2-->

                <!-- Etapa 3 -->
                <div id="step-3" style="display: none" class="form-step">
                    <h2 class="text-center">
                        Agora Você Pode Personalizar o Seu Seguro
                    </h2>
                    <!-- Input Cobertura de Incêndio -->
                    <div class="form-group">
                        <label for="valorcoberturaincendio">Cobertura de Incêndio:</label>
                        <div class="input-group">
                            <input type="text" class="form-control valorcoberturaincendio" id="valorcoberturaincendio"
                                readonly />
                            <div class="input-group-append">
                                <span class="input-group-text">R$</span>
                            </div>
                        </div>
                        <br />
                        <div id="slider-cobertura"></div>
                    </div>

                    <button type="button" class="btn btn-secondary prev-step">
                        Etapa anterior
                    </button>
                    <button type="submit" class="btn btn-success submit-form">
                        Enviar formulário
                    </button>
                </div>
                <!-- Fim da Etapa 3-->
            </div>
        </form>
    </div>
    <!-- Fim Container Formulário-->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/@tensorflow/tfjs-fetch"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-i18n/1.12.1/jquery-ui-i18n.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="/src/js/app.js"></script>
    <script src="/src/js/viaCep.js"></script>

    <script>

        //Api que guarda os dados do fomulario e envia para uma api com bearer token
        const submitForm = async (event) => {
            event.preventDefault();

            //Pega os dados do formulario
            const form = document.querySelector('#form');
            const formData = new FormData(form);

            //define as opções para a requisição
            const options ={
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer 1234567890',
                },
                body: formData
            };

            //faz a requisição
            const response = await fetch('https://api.com.br', options);

            //verifica se a requisição foi bem sucedida
            if (response.ok) {
                const data = await response.json();
                console.log(data);
            }else {
                console.error('Erro na Requisição', response.status, response.statusText);
            }
        }

        //Adiciona o evento de submit no formulario
        const form = document.querySelector('#form');
        form.addEventListener('submit', submitForm);
        

    </script>
</body>

</html>